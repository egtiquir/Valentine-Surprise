<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Secure Valentine Delivery Portal</title>

<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #ff4e8d, #ff9a9e);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
}

.container {
    background: white;
    width: 95%;
    max-width: 520px;
    border-radius: 20px;
    padding: 30px;
    text-align: center;
    box-shadow: 0 20px 50px rgba(0,0,0,0.2);
    position: relative;
}

.logo {
    font-weight: bold;
    color: #ff4e8d;
    cursor: pointer;
    margin-bottom: 8px;
}

.now-playing {
    font-size: 13px;
    color: #ff4e8d;
    margin-bottom: 15px;
    font-weight: bold;
}

button {
    padding: 10px 20px;
    border-radius: 10px;
    border: none;
    background: #ff4e8d;
    color: white;
    cursor: pointer;
    margin: 10px;
    font-weight: bold;
}

input {
    padding: 10px;
    border-radius: 10px;
    border: 1px solid #ddd;
    width: 85%;
}

.hidden { display: none; }

.progress-bar {
    width: 100%;
    background: #eee;
    border-radius: 10px;
    overflow: hidden;
    margin-top: 15px;
}

.progress-fill {
    height: 12px;
    width: 0%;
    background: #ff4e8d;
    transition: width 0.4s ease;
}

/* Modal */
.modal {
    position: fixed;
    background: rgba(0,0,0,0.6);
    width: 100%;
    height: 100%;
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 10;
}

.modal.show {
    display: flex;
}

.modal-box {
    background: white;
    padding: 30px;
    border-radius: 20px;
    text-align: center;
    max-width: 400px;
}

/* Floating hearts */
.floating-heart {
    position: fixed;
    bottom: -20px;
    font-size: 20px;
    animation: floatUp 6s linear infinite;
    color: rgba(255,255,255,0.6);
}

@keyframes floatUp {
    from { transform: translateY(0); }
    to { transform: translateY(-100vh); }
}
</style>
</head>
<body>

<audio id="bgMusic"></audio>

<div class="container">

<div class="logo" onclick="adminTap()">SVP Secure Delivery</div>
<div class="now-playing">üéµ Now Playing: Dumptruck Playlist</div>

<!-- PASSWORD -->
<div id="passwordSection">
<h2>üîê Secure Access</h2>
<input type="password" id="passwordInput" placeholder="Enter Password">
<br>
<button onclick="checkPassword()">Access</button>
</div>

<!-- INTRO -->
<div id="introSection" class="hidden">
<h2 id="typeText"></h2>
<button onclick="startValentine()">Continue üíå</button>
</div>

<!-- VALENTINE -->
<div id="valentineSection" class="hidden">
<h2>Will you be my Valentine?</h2>
<button onclick="sayYes()">YES üíò</button>
<button id="noBtn">NO üòè</button>
</div>

<!-- QUIZ -->
<div id="quizSection" class="hidden">
<h2>Memory Verification</h2>
<p id="questionText"></p>
<input type="text" id="answerInput">
<button onclick="checkAnswer()">Submit</button>
<div class="progress-bar">
<div class="progress-fill" id="progressFill"></div>
</div>
</div>

<!-- TRACKER -->
<div id="trackerSection" class="hidden">
<h2>üì¶ Shipment Activated</h2>
<p><strong>Tracking #:</strong> <span id="trackingNumber"></span></p>
<p>Status: Scanned at Los Angeles Facility</p>
<p id="countdown"></p>
<input type="datetime-local" id="dateTimePicker">
<button onclick="startCountdown()">Set Delivery Time</button>
</div>

</div>

<!-- MODAL -->
<div id="volumeModal" class="modal">
    <div class="modal-box">
        <h3>üéµ Make Sure Your Volume Is Up</h3>
        <p>*Hint* *Hint* *wink* *wink*</p>
        <button onclick="confirmVolume()">Okay üíï</button>
    </div>
</div>

<script>
const correctPassword = "qwanisha";

const playlist = [
"song1.mp3",
"song2.mp3",
"song3.mp3"
];

const questions = [
{ q: "Quien Vive?", a: "cristo" },
{ q: "Y a su nombre", a: "gloria" },
{ q: "Where was our first quote on quote date? Or well first place we went to together, don't forget to add the(-)", a: "in-n-out" },
{ q: "What was the tv show that we spent hours watching?", a: "king julien" },
{ q: "Where were we headed to when the playlist you're listening to was created?", a: "san diego" }
];

let currentSong = 0;
let musicStarted = false;
let currentQuestion = parseInt(localStorage.getItem("currentQuestion")) || 0;
let countdownInterval;
let adminClicks = 0;

/* NORMALIZER */
function normalize(text){
    return text.toLowerCase().replace(/[\s\-']/g,"").trim();
}

/* PASSWORD */
function checkPassword(){
    const input = document.getElementById("passwordInput").value.toLowerCase();
    if(input === correctPassword){
        localStorage.setItem("unlocked","true");
        document.getElementById("volumeModal").classList.add("show");
    } else alert("Access Denied üòè");
}

function confirmVolume(){
    document.getElementById("volumeModal").classList.remove("show");
    startPlaylist();
    showIntro();
}

/* PLAYLIST */
function startPlaylist(){
    if(musicStarted) return;
    musicStarted = true;
    playSong(currentSong);
}

function playSong(index){
    const music = document.getElementById("bgMusic");
    music.src = playlist[index];
    music.volume = 0;
    music.play();
    fadeIn(music);

    music.onended = () => {
        fadeOut(music, () => {
            currentSong = (currentSong + 1) % playlist.length;
            playSong(currentSong);
        });
    };
}

function fadeIn(audio){
    let fade = setInterval(()=>{
        if(audio.volume < 0.95){
            audio.volume += 0.05;
        } else {
            audio.volume = 1;
            clearInterval(fade);
        }
    },150);
}

function fadeOut(audio, callback){
    let fade = setInterval(()=>{
        if(audio.volume > 0.05){
            audio.volume -= 0.05;
        } else {
            audio.volume = 0;
            clearInterval(fade);
            callback();
        }
    },150);
}

/* INTRO */
function showIntro(){
    document.getElementById("passwordSection").classList.add("hidden");
    document.getElementById("introSection").classList.remove("hidden");
    typeWriter();
}

function typeWriter(){
    const text = "Before delivery can proceed... one important question must be answered.";
    const element = document.getElementById("typeText");
    element.innerHTML="";
    let i = 0;
    function typing(){
        if(i < text.length){
            element.innerHTML += text.charAt(i);
            i++;
            setTimeout(typing, 35);
        }
    }
    typing();
}

function startValentine(){
    document.getElementById("introSection").classList.add("hidden");
    document.getElementById("valentineSection").classList.remove("hidden");
}

/* MOVING NO */
document.getElementById("noBtn").addEventListener("mouseover", function(){
    this.style.position = "absolute";
    this.style.left = Math.random()*70 + "%";
    this.style.top = Math.random()*70 + "%";
});

function sayYes(){
    document.getElementById("valentineSection").classList.add("hidden");
    document.getElementById("quizSection").classList.remove("hidden");
    loadQuestion();
}

/* QUIZ */
function loadQuestion(){
    document.getElementById("questionText").innerText = questions[currentQuestion].q;
    document.getElementById("progressFill").style.width =
    (currentQuestion/questions.length)*100 + "%";
}

function checkAnswer(){
    const userAnswer = normalize(document.getElementById("answerInput").value);
    const correctAnswer = normalize(questions[currentQuestion].a);

    if(userAnswer === correctAnswer){
        currentQuestion++;
        localStorage.setItem("currentQuestion", currentQuestion);
        document.getElementById("answerInput").value="";
        if(currentQuestion < questions.length){
            loadQuestion();
        } else {
            launchConfetti();
            setTimeout(showTracker, 1200);
        }
    } else alert("Wrong answer cutie üòå");
}

/* CONFETTI */
function launchConfetti(){
    for(let i=0;i<60;i++){
        const confetti = document.createElement("div");
        confetti.style.position="fixed";
        confetti.style.width="8px";
        confetti.style.height="8px";
        confetti.style.background="#ff4e8d";
        confetti.style.top="-10px";
        confetti.style.left=Math.random()*100+"%";
        document.body.appendChild(confetti);

        let fall = setInterval(()=>{
            confetti.style.top =
            (parseFloat(confetti.style.top)+5)+"px";
        },30);

        setTimeout(()=>{
            clearInterval(fall);
            confetti.remove();
        },1500);
    }
}

/* TRACKER */
function showTracker(){
    document.getElementById("quizSection").classList.add("hidden");
    document.getElementById("trackerSection").classList.remove("hidden");

    if(!localStorage.getItem("trackingNumber")){
        localStorage.setItem("trackingNumber",
        "SVP"+Math.floor(Math.random()*1000000000));
    }

    document.getElementById("trackingNumber").innerText =
    localStorage.getItem("trackingNumber");
}

function startCountdown(){
    const target = new Date(document.getElementById("dateTimePicker").value).getTime();
    clearInterval(countdownInterval);

    countdownInterval = setInterval(()=>{
        const now = new Date().getTime();
        const distance = target-now;

        if(distance <= 0){
            document.getElementById("countdown").innerHTML="üéâ DELIVERY COMPLETE!";
            clearInterval(countdownInterval);
            return;
        }

        const days = Math.floor(distance/(1000*60*60*24));
        const hours=Math.floor((distance%(1000*60*60*24))/(1000*60*60));
        const minutes=Math.floor((distance%(1000*60*60))/(1000*60));
        const seconds=Math.floor((distance%(1000*60))/1000);

        document.getElementById("countdown").innerHTML=
        days+"d "+hours+"h "+minutes+"m "+seconds+"s";
    },1000);
}

/* ADMIN */
function adminTap(){
    adminClicks++;
    if(adminClicks >= 5){
        alert("Admin Mode Activated");
        document.getElementById("trackerSection").classList.remove("hidden");
    }
}

/* FLOATING HEARTS */
setInterval(()=>{
    const heart=document.createElement("div");
    heart.innerHTML="üíñ";
    heart.className="floating-heart";
    heart.style.left=Math.random()*100+"%";
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(),6000);
},1500);
</script>

</body>
</html>
