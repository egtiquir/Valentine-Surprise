<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Secure Valentine Delivery Portal</title>

<style>
    html{
height:100%;
}

body{
margin:0;
font-family:'Segoe UI',sans-serif;
background:linear-gradient(135deg,#ff4e8d,#ff9a9e);
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
padding:20px 0;
overflow:auto;
}
.container{
background:white;
width:95%;
max-width:520px;
border-radius:20px;
padding:30px;
text-align:center;
box-shadow:0 20px 50px rgba(0,0,0,0.2);
position:relative;
z-index:5;
}
.hidden{display:none;}
button{
padding:10px 20px;
border-radius:10px;
border:none;
background:#ff4e8d;
color:white;
cursor:pointer;
margin:10px;
font-weight:bold;
}
input{
padding:10px;
border-radius:10px;
border:1px solid #ddd;
width:85%;
font-size:16px;    
}

/* Volume Modal */
#volumeModal{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.6);
display:none;
justify-content:center;
align-items:center;
z-index:15;
}
.modalBox{
background:white;
padding:30px;
border-radius:20px;
text-align:center;
}

/* Video */
#videoWrapper{
position:fixed;
top:50%;
left:50%;
transform:translate(-50%,-50%);
width:80%;
max-width:600px;
display:none;
z-index:10;
}
#scanVideo{
width:100%;
border-radius:15px;
box-shadow:0 15px 40px rgba(0,0,0,0.4);
}

/* Progress */
.progress-bar{
width:100%;
height:25px;
background:#eee;
border-radius:25px;
overflow:hidden;
position:relative;
margin-top:20px;
}
.progress-fill{
height:100%;
width:0%;
background:#ff4e8d;
transition:width .5s ease;
}
.car{
position:absolute;
top:4px;
font-size:18px;
transition:left .5s ease;
}
.countdownText{
margin-top:10px;
font-weight:bold;
color:#ff4e8d;
}

/* Hearts */
.floating-heart{
position:fixed;
bottom:-20px;
font-size:20px;
animation:floatUp 6s linear infinite;
color:rgba(255,255,255,0.6);
z-index:1;
}
@keyframes floatUp{
from{transform:translateY(0);}
to{transform:translateY(-100vh);}
}

/* Envelope */
#letterModal{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.6);
display:none;
justify-content:center;
align-items:center;
z-index:25;
}
.envelope{
width:320px;
height:220px;
background:#fff;
position:relative;
border-radius:10px;
box-shadow:0 10px 30px rgba(0,0,0,0.4);
text-align:center;
}
.flap{
position:absolute;
top:0;
left:0;
width:100%;
height:100%;
background:#ffe6ea;
clip-path:polygon(0 0,100% 0,50% 60%);
transition:transform 1s ease;
transform-origin:top;
}
.envelope.open .flap{
transform:rotateX(180deg);
}
.seal{
width:60px;
height:60px;
background:#c1121f;
border-radius:50%;
position:absolute;
top:75px;
left:50%;
transform:translateX(-50%);
display:flex;
justify-content:center;
align-items:center;
color:white;
font-weight:bold;
cursor:pointer;
box-shadow:0 5px 15px rgba(0,0,0,0.4);
}
.letterContent{
display:none;
padding:20px;
font-size:14px;
text-align:left;
max-height:180px;
overflow:auto;
}
.envelope.open .letterContent{
display:block;
}

/* Final overlay */
#finalOverlay{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.7);
display:none;
justify-content:center;
align-items:center;
z-index:20;
transition: opacity 1s ease;  
}
.finalBox{
background:white;
padding:40px;
border-radius:20px;
max-width:500px;
text-align:center;
}
</style>
</head>
<body>

<audio id="bgMusic"></audio>

<div id="videoWrapper">
<video id="scanVideo" src="Scan.mp4" muted playsinline></video>
</div>

<div class="container">

<div style="font-size:13px;color:#ff4e8d;margin-bottom:10px;font-weight:bold;">
üéµ Now Playing: Dumptruck Playlist
</div>

<div id="passwordSection">
<h2>üîê Secure Access</h2>
<input type="password" id="passwordInput">
<button onclick="checkPassword()">Access</button>
</div>

<div id="introSection" class="hidden">
<h2 id="typeText"></h2>
<button onclick="startValentine()">Continue üíå</button>
</div>

<div id="valentineSection" class="hidden">
<h2>Will you be my Valentine?</h2>
<button onclick="sayYes()">YES üíò</button>
<button id="noBtn">NO üòè</button>
</div>

<div id="quizSection" class="hidden">
<h2>Memory Verification</h2>
<p id="questionText"></p>
<input type="text" id="answerInput">
<br>
<button onclick="checkAnswer()">Submit</button>
</div>

<div id="trackerSection" class="hidden">
<h2>üì¶ Shipment Status</h2>
<p id="estimatedDate"></p>
<div class="progress-bar">
<div class="progress-fill" id="progressFill"></div>
<div class="car" id="car">üöó</div>
</div>

<div style="display:flex;justify-content:space-between;font-size:12px;margin-top:8px;">
<span id="statusSelected">Gift Selected</span>
<span id="statusRoute">On Route</span>
<span id="statusDelivered">Delivered</span>
</div>

</div>
    
<p class="countdownText" id="countdown"></p>
<button onclick="openLetter()">Open Sealed Letter üíå</button>
</div>

</div>

<div id="volumeModal">
<div class="modalBox">
<h3>üéµ Make Sure Your Volume Is Up</h3>
<button onclick="confirmVolume()">Okay üíï</button>
</div>
</div>

<div id="letterModal">
<div class="envelope" id="envelope">
<div class="flap"></div>
<div class="seal" id="seal" onclick="breakSeal()">üíù</div>
<div class="letterContent">
<p>
While your package makes its way to you‚Ä¶<br><br>
So hiiii love, it's your grumpy boyfriend here. I wanted to say I love you and sorry for all the misspelled grammar.
I'm rushing this a bit because of time, but I wanted to write you a nice letter like you've done for me.<br><br>
So what's so great about Katherine? Hmmmmm where do I start‚Ä¶
For starters, you're very energetic, very enthusiastic about things, and the best of all is how great you are in the Christian life.<br><br>
Also it's awesome I got a smart girlfriend who can do so much reading and pass her classes ‚Äî even getting honors.
It's an honor to meet you‚Ä¶ ahhh but I digress.<br><br>
Thank you for these past 3 years. This is our 3rd Valentine‚Äôs.
This one‚Äôs a bit different because of our responsibilities, but we make it work.<br><br>
LOVE YOU. ‚ù§Ô∏è<br><br>
‚Äì Yours Truly, Quack
</p>
<div style="text-align:center;">
<button onclick="closeLetter()">Close üíï</button>
</div>
</div>
</div>
</div>

<div id="finalOverlay">
<div class="finalBox">
<h2 style="color:#ff4e8d;">üíù Special Delivery</h2>
<p>Your gift has officially arrived‚Ä¶<br><br>
I hoped yo enjoyed, I was typing this as you sat with jessica and you not fat you're BOOOtttyyyyyfullll... now chat gpt wrote the next part and its cringey so itll stay ....But truthfully, the real gift has always been you. ‚ù§Ô∏è</p>
</div>
</div>

<script>
const correctPassword="qwanisha";

/* Automatically set TOMORROW at 9:45 PM */
const nowDate=new Date();
const deliveryTime=new Date(
nowDate.getFullYear(),
nowDate.getMonth(),
nowDate.getDate(),
12,45,0,0
).getTime();

const playlist=["song1.mp3","song2.mp3","song3.mp3"];

const questions=[
{q:"Quien Vive?",a:"cristo"},
{q:"Y a su nombre",a:"gloria"},
{q:"Where was our first quote on quote date? Don't forget the (-)",a:"innout"},
{q:"What was the tv show that we spent hours watching?",a:"kingjulien"},
{q:"Where were we headed when the playlist was created?",a:"sandiego"}
];

let currentSong=0;
let musicStarted=false;
let currentQuestion=0;
let finalShown=false;

function checkPassword(){
if(document.getElementById("passwordInput").value.toLowerCase()===correctPassword){
document.getElementById("volumeModal").style.display="flex";
}
}

function confirmVolume(){
document.getElementById("volumeModal").style.display="none";
startPlaylist();
showIntro();
}

function startPlaylist(){
if(musicStarted)return;
musicStarted=true;
const music=document.getElementById("bgMusic");
music.src=playlist[currentSong];
music.volume=0.3;
music.play();
music.addEventListener("ended",()=>{
currentSong=(currentSong+1)%playlist.length;
music.src=playlist[currentSong];
music.play();
});
}

function showIntro(){
document.getElementById("passwordSection").classList.add("hidden");
document.getElementById("introSection").classList.remove("hidden");
typeWriter();
}

function typeWriter(){
const text="Before delivery can proceed... one important question must be answered.";
const el=document.getElementById("typeText");
el.innerHTML="";
let i=0;
(function type(){
if(i<text.length){
el.innerHTML+=text.charAt(i++);
setTimeout(type,35);
}
})();
}

function startValentine(){
document.getElementById("introSection").classList.add("hidden");
document.getElementById("valentineSection").classList.remove("hidden");
}

document.getElementById("noBtn").addEventListener("mouseover",function(){
this.style.position="absolute";
this.style.left=Math.random()*70+"%";
this.style.top=Math.random()*70+"%";
});

function sayYes(){
document.getElementById("valentineSection").classList.add("hidden");
document.getElementById("quizSection").classList.remove("hidden");
loadQuestion();
}

function loadQuestion(){
document.getElementById("questionText").innerText=questions[currentQuestion].q;
}

function checkAnswer(){
const input=document.getElementById("answerInput").value
.toLowerCase().replace(/[^a-z0-9]/g,"");

if(input===questions[currentQuestion].a){
document.getElementById("answerInput").value="";
if(currentQuestion===questions.length-1){
launchConfetti();
playScanVideo();
}else{
currentQuestion++;
loadQuestion();
}
}else{
alert("Wrong answer cutie üòå");
}
}

function launchConfetti(){
for(let i=0;i<40;i++){
const d=document.createElement("div");
d.style.position="fixed";
d.style.width="6px";
d.style.height="6px";
d.style.background="#ff4e8d";
d.style.top="-10px";
d.style.left=Math.random()*100+"%";
document.body.appendChild(d);
let fall=setInterval(()=>{d.style.top=(parseFloat(d.style.top)+5)+"px";},30);
setTimeout(()=>{clearInterval(fall);d.remove();},1000);
}
}

function playScanVideo(){
const wrapper=document.getElementById("videoWrapper");
const v=document.getElementById("scanVideo");
wrapper.style.display="block";
v.currentTime=0;
v.play();
v.onended=()=>{
wrapper.style.display="none";
showTracker();
};
}

function showTracker(){
document.getElementById("quizSection").classList.add("hidden");
document.getElementById("trackerSection").classList.remove("hidden");
document.getElementById("estimatedDate").innerText=
"Estimated Delivery: "+new Date(deliveryTime).toLocaleString();

updateProgress();
setInterval(updateProgress, 1000);  // ‚Üê ADD THIS LINE
}


function updateProgress(){
const now=new Date().getTime();
const distance=deliveryTime-now;

const fill=document.getElementById("progressFill");
const car=document.getElementById("car");

const selected=document.getElementById("statusSelected");
const route=document.getElementById("statusRoute");
const delivered=document.getElementById("statusDelivered");

// Reset colors
selected.style.color="#999";
route.style.color="#999";
delivered.style.color="#999";

if(distance<=0){
fill.style.width="100%";
car.style.left="92%";
document.getElementById("countdown").innerHTML="üéâ Delivered!";

selected.style.color="#ff4e8d";
route.style.color="#ff4e8d";
delivered.style.color="#ff4e8d";

if(!finalShown){
    finalShown = true;

    const overlay = document.getElementById("finalOverlay");

    overlay.style.display = "flex";
    overlay.style.opacity = "1";

    // Wait 5 seconds
    setTimeout(() => {
        overlay.style.opacity = "0";
    }, 5000);

    // After fade finishes, remove it
    setTimeout(() => {
        overlay.style.display = "none";
    }, 6000);
}

return;
}

// Before delivery time
fill.style.width="50%";
car.style.left="45%";

selected.style.color="#ff4e8d";
route.style.color="#ff4e8d";

const minutes=Math.floor((distance%(1000*60*60))/(1000*60));
const seconds=Math.floor((distance%(1000*60))/1000);

document.getElementById("countdown").innerHTML=
minutes+"m "+seconds+"s remaining";
}

function openLetter(){
document.getElementById("letterModal").style.display="flex";
}

function closeLetter(){
document.getElementById("letterModal").style.display="none";
document.getElementById("envelope").classList.remove("open");
document.getElementById("seal").style.display="flex";
}

function breakSeal(){
document.getElementById("envelope").classList.add("open");
document.getElementById("seal").style.display="none";
}

setInterval(()=>{
const h=document.createElement("div");
h.innerHTML="üíñ";
h.className="floating-heart";
h.style.left=Math.random()*100+"%";
document.body.appendChild(h);
setTimeout(()=>h.remove(),6000);
},1500);
</script>

</body>
</html>        
